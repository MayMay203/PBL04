<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trang cá nhân</title>
    <!-- Thay thế fragment header -->

    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css" />
    <script type="text/javascript" src="https://code.jquery.com/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="https://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js" integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.min.css">
<!--    <link rel="stylesheet" type="text/css" th:href="@{/css/base2.css}">-->
    <link rel="stylesheet" type="text/css" th:href="@{/css/TrangCaNhan.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/css/ThemHoatDong.css}">
    <script defer th:src="@{/js/Header.js}"></script>
    <script  defer th:src="@{/js/TrangCaNhan.js}"></script>
    <script  defer th:src="@{/js/ThemHoatDong.js}"></script>
    <script  defer th:src="@{/js/HoatDong.js}"></script>

</head>
<body>
<!--    <div id="iframe-container" class="sticky-top" style="top: -87px">-->
<!--    </div>-->
<div id="placeholder" style="height: 87px; display: none;"></div>
<!-- Header -->
<div id="myHeader" style="top: -87px" th:include="Header :: html" ></div>
    <div class="container-fluid">
        <div class="sectionAvatar">
            <img class="sectionAvatar__img-back dimmed" th:src="@{/images/avatar.png}" alt="">
            <img class="sectionAvatar__img-front" th:src="@{/images/avatar.png}" alt="">
            <span class="sectionAvatar__name" th:text="${user.getHoTen()}"></span>
            <i id="icon-edit" class="sectionAvatar__edit bi bi-pencil-square" ></i>
            <!-- Modal -->
            <div class="modal fade" id="modalChangeInform" tabindex="-1" aria-labelledby="EditModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-lg ">
                    <div class="modal-content custom-modal-color">
                        <div class="modal-header">
                            <h5 class="modal-title" id="EditModalLabel">CHỈNH SỬA THÔNG TIN CÁ NHÂN</h5>
                            <button id="closeButton" type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <form action="" id="formChangeInform" method="post" th:object="${user}">
                                <div class="div__avatar">
                                    <div><img class="svg-avatar" th:src="@{/images/svg-avatar.svg}" alt="Ảnh đại diện"></div>
                                    <div class="d-flex justify-content-center"><img id="img-avatar" th:src="@{/images/avatar.png}" alt=""></div>
                                    <div>
                                        <input class="custom-file-input choose-file" type="file" accept="image/png, image/jpeg, image/gif" name="" id="input-file">
                                        <label class="custom-file-label" for="input-file"><img th:src="@{/images/anh.png}"> Chọn ảnh</label>
                                    </div>
                                </div>
                                <div class="div__inform">
                                    <div class="title-inform">
                                        <img class="svg-inform" th:src="@{/images/svg-inform.svg}">
                                    </div>
                                    <div class="div__inform-form">
                                        <div>
                                            <div class="mb-3 d-flex align-items-center">
                                                <i class="bi bi-person-vcard"></i>
                                                <label for="name" class="form-label">Họ tên: </label>
                                                <input type="text" class="form-control" id="name" placeholder="Nguyễn Văn A" name="name" required th:value="${user.getHoTen()}">
                                                <div class="valid-feedback">Valid.</div>
                                                <div class="invalid-feedback">Please fill out this field.</div>
                                            </div>
                                            <div class="mb-3 d-flex align-items-center">
                                                <i class="bi bi-gender-ambiguous"></i>
                                                <label class="form-label">Giới tính:</label>
                                                <div class="form-check form-check-inline">
                                                    <input type="radio" class="form-check-input form-check-gender" id="radio1" name="optradio" value="option1" required th:checked="${user.getGioiTinh() == 0}">
                                                    <label class="form-check-label" for="radio1">Nam</label>
                                                </div>
                                                <div class="form-check form-check-inline">
                                                    <input type="radio" class="form-check-input form-check-gender" id="radio2" name="optradio" value="option2" required th:checked="${user.getGioiTinh() == 1}">
                                                    <label class="form-check-label" for="radio2">Nữ</label>
                                                </div>
                                                <div class="form-check form-check-inline">
                                                    <input type="radio" class="form-check-input form-check-gender" id="radio3" name="optradio" value="option3" required th:checked="${user.getGioiTinh() == 2}">
                                                    <label class="form-check-label" for="radio3">Khác</label>
                                                </div>
                                                <div class="valid-feedback">Valid.</div>
                                                <div class="invalid-feedback">Please fill out this field.</div>
                                            </div>
                                            <div class="mb-3 d-flex align-items-center">
                                                <i class="bi bi-cake2"></i>
                                                <label for="birthday" class="form-label">Ngày sinh: </label>
                                                <input type="date" class="form-control" id="birthday" name="birthday" required th:value="${user.getNgaySinh()}">
                                                <div class="valid-feedback">Valid.</div>
                                                <div class="invalid-feedback">Please fill out this field.</div>
                                            </div>
<!--                                            <div class="mb-3">-->
                                            <div class="mb-3 d-flex align-items-center">
                                                <i class="bi bi-geo-alt"></i>
                                                <label for="address" class="form-label">Địa chỉ:</label>
                                                <input type="text" class="form-control" id="address" placeholder="Nhập địa chỉ cụ thể (số nhà, tên đường, ...)" name="address" required th:value="${user.getDiaChi()}">
                                                <!-- <form > -->
                                                    <div class="form-address">

<!--                                                        <div class="mb-2 form-group d-flex align-items-center">                                                -->
<!--                                                            <label for="addressLine">Số nhà:</label>                                                -->
<!--                                                            <input type="text" class="form-control" id="addressLine" placeholder="Nhập địa chỉ cụ thể (số nhà, tên đường, ...)" name="addressLine" required th:value="${user.getDiaChi()}">-->
<!--                                                        </div>                                                                  -->
<!--                                                        <div class="mb-2 form-group d-flex align-items-center">                                                -->
<!--                                                            <label for="wardCommune">Xã/Phường:</label>                                                -->
<!--                                                            <input type="text" class="form-control" id="wardCommune" placeholder="Nhập xã/phường" name="wardCommune" required>                                                -->
<!--                                                        </div>-->
<!--                                                        <div class="mb-2 form-group d-flex align-items-center">                                                -->
<!--                                                            <label for="district">Quận/Huyện:</label>                                                -->
<!--                                                            <input type="text" class="form-control" id="district" placeholder="Nhập quận/huyện" name="district" required>                                                -->
<!--                                                        </div>-->
<!--                                                        <div class="mb-2 form-group d-flex align-items-center">                                                -->
<!--                                                            <label >Tỉnh/Thành phố:</label>                                                -->
<!--                                                            &lt;!&ndash; <select class="form-control" id="provinceCity" name="provinceCity" required> -->
<!--                                                                <option value="">Chọn tỉnh/thành phố</option>-->
<!--                                                                <option value="hanoi">Hà Nội</option>-->
<!--                                                                <option value="hcm">Hồ Chí Minh</option>-->
<!--                                                                <option value="danang">Đà Nẵng</option>-->
<!--                                                            </select> &ndash;&gt;-->
<!--                                                            <input type="text" class="form-control" id="address" placeholder="Chọn tỉnh/thành phố" name="pswd" required>-->
<!--                                                        </div>         -->
                                                    </div>                                       
                                                <!-- </form> -->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="div__contact">
                                    <div class="title-contact">
                                        <img class="svg-contact" th:src="@{/images/svg-contact.svg}">
                                    </div>
                                    <div class="div__contact-form">
                                        <div>
                                            <div class="mb-3 d-flex align-items-center">
                                                <i class="bi bi-telephone"></i>
                                                <label class="form-label" for="phone">Số điện thoại:</label>
                                                <input type="tel" class="form-control" id="phone" name="phone" pattern="[0-9]{10}" placeholder="Nhập số điện thoại" required th:value="${user.getSoDienThoai()}">
                                                <div class="valid-feedback">Valid.</div>
                                                <div class="invalid-feedback">Please fill out this field.</div>
                                            </div>
                                            <div class="mb-3 d-flex align-items-center">
                                                <i class="bi bi-envelope"></i>
                                                <label class="form-label" for="email">Địa chỉ email:</label>
                                                <input type="email" class="form-control" id="email" name="email"  placeholder="Nhập địa chỉ email" required th:value="${user.email != null} ? ${user.getEmail()} : ''">
                                                <div class="valid-feedback">Valid.</div>
                                                <div class="invalid-feedback">Please fill out this field.</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="line"></div>
                                <button type="submit" class="btn btn-primary" id="submitBtn">Submit</button>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="reset" class="btnReset btn-secondary" id="btnReset" >Hủy thay đổi</button>
                            <button type="button" class="btnSave btn-primary">Lưu thay đổi</button>
                            <!-- data-dismiss="modal": đóng cửa sổ modal -->
                        </div>
                    </div>
                </div>
            </div> 
        </div>
        <div class="container__section">
            <img class="img-avatar-small" src="/images/avatar1.png" alt="">
            <input type="text" class="txtCreateActivity" placeholder="Tạo mới hoạt động....." >

            <button type="button" id="btnAddAct" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#ThemHoatDongModal" style="display: none;">
                Thêm
            </button>

            <div class="modal fade" id="ThemHoatDongModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-lg modal-dialog-themhd">
                    <div class="modal-content modal-content-themhd">
                        <form  th:action="@{/addActivity}" th:object="${activity}" method="POST" class="needs-validation" id="myFormActivity" novalidate>
<!--                            <input type="hidden" id="userID" name="id" th:value="${account.getId()}" />-->
                            <div class="modal-header  modal-header-themhd ">
                                <h5 class="modal-title modal-title-themhd "id="exampleModalLabel" >THÊM HOẠT ĐỘNG</h5>
                                <button type="button" class="btn-close btnClose" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body modal-body-themhd">
                                <div class="container modal-body-detail">

                                    <div class="row">
                                        <div class="col-md-3"><label class="lbHD" for="txt_NameTopic"><i class="bi bi-pencil-square"></i>CHỦ
                                            ĐỀ</label></div>
                                        <div class="col-md-9"><input class="textfieldHD form-control" type="text" name="txt_NameTopic"
                                                                     id="txt_NameTopic"  th:field="*{maChuDe.tenChuDe}" required></div>
                                        <div class="invalid-feedback">Vui lòng nhập tên chủ đề</div>
                                    </div>
                                    <br>
                                    <div class="row">
                                        <div class="col-md-3"><label class="lbHD" for="txt_NameActi"><i class="bi bi-fire"></i>TÊN HOẠT
                                            ĐỘNG</label></div>
                                        <div class="col-md-9"> <input class="textfieldHD form-control" type="text" name="txt_NameActi"
                                                                      id="txt_NameActi" th:field="*{tenHD}" required></div>
                                        <div class="invalid-feedback">Vui lòng nhập tên hoạt động</div>
                                    </div>
                                    <br>
                                    <div class="row">
                                        <div class="col-md-3"> <label class="lbHD" for="txt_Location"><i class="bi bi-geo-alt-fill"></i>ĐỊA
                                            ĐIỂM</label></div>
                                        <div class="col-md-9"><input class="textfieldHD form-control" type="text" name="txt_Location"
                                                                     id="txt_Location" th:field="*{diaDiem}" required></div>
                                        <div class="invalid-feedback">Vui lòng nhập địa điểm</div>
                                    </div>
                                    <br>
                                    <div class="row">
                                        <div class="col-md-3">
                                            <label class="lbHD" for="txt_dateBD"><i class="bi bi-calendar-minus"></i>THỜI GIAN BẮT ĐẦU</label>
                                        </div>
                                        <div class="col-md-3"><input class="txt-tnv form-control" type="date" name="txt_dateBD" id="txt_dateBD"
                                                                     th:date="*{thoiGianBD}"
                                                                     required></div>
                                        <div class="invalid-feedback">Vui lòng chọn thời gian bắt đầu</div>
                                        <div class="col-md-3">
                                            <label class="lbHD" for="txt_dateKT"><i class="bi bi-calendar-minus"></i>THỜI GIAN KẾT THÚC</label>
                                        </div>
                                        <div class="col-md-3"><input class="txt-tnv form-control" type="date" name="txt_dateKT" id="txt_dateKT"
                                                                     th:date="*{thoiGianKT}"
                                                                     required></div>
                                        <div class="invalid-feedback">Vui lòng chọn thời gian kết thúc</div>
                                    </div>
                                    <br>
                                    <div class="row">
                                        <div class="col-md-3 lbHD"><i class="bi bi-people-fill"></i>SỐ TNV TỐI THIỂU</div>
                                        <div class="col-md-3"><input class="txt-tnv form-control" type="text" name="txt_tnv" id="txt_tnvtt"
                                                                     th:field="*{soTNVToiThieu}"
                                                                     required></div>
                                        <div class="invalid-feedback">Vui lòng nhập số tình nguyện viên tối đa</div>
                                        <div class="col-md-3 lbHD"><i class="bi bi-person-dash"></i>SỐ TNV TỐI ĐA</div>
                                        <div class="col-md-3"><input class="txt-tnv form-control" type="text" name="txt_tnvTT" id="txt_tnvtd"
                                                                     th:field="*{soTNVToiDa}"
                                                                     required></div>
                                        <div class="invalid-feedback">Vui lòng nhập số tình nguyện viên tối đa</div>
                                    </div>
                                    <br>
                                    <div class="row">
                                        <div class="col-md-3 lbHD"><i class="bi bi-menu-up"></i>MÔ TẢ</div>
                                        <div class="col-md-9">
                                            <textarea name="txt_mota" id="txt_mota" class="form-control" cols="71" rows="20" th:field="*{moTa}" required></textarea>
                                        </div>
                                        <div class="invalid-feedback">Vui lòng nhập mô tả hoạt động</div>
                                    </div>
                                    <br>
                                    <div class="row">
                                        <div class="col-md-3 lbHD"><i class="bi bi-card-image"></i>HÌNH ẢNH</div>
                                        <div class="col-md-9">
                                            <label for="imageInput" id="imagePreviewLabel">
                                                <div id="imagePreview" class="image-preview">
                                                    <input type="file" id="imageInput" accept="image/jpeg, image/png, image/gif" style="display: none" th:field="*{anh}"
                                                           onchange="previewImage(Event)">
                                                    <img id="userImage" th:src="@{/images/default.webp}" alt="Hình ảnh người dùng" >
                                                </div>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer modal-footer-themhd">
                                <button type="submit" class="btnSave" th:attr="data-account-id=${account.id}"><i class="bi bi-floppy2"></i> Lưu thay đổi</button>
                                <button type="button" class="btnCancel" onclick="resetFormFields()"><i class="bi bi-x-circle-fill"></i> Hủy thay
                                    đổi</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <div class="text-end"><input class="btnPost" type="button" value="Đăng bài" name="btnPost"></div>
        </div>
        <div class="container__section">
            <!-- <input type="text" class="txtSearch" placeholder="Tìm kiếm"> -->
            <div>
                <div class="d-flex align-items-center">
                    <label class="p-2 me-auto labelFilter">HOẠT ĐỘNG</label>
                    <button class="ms-auto" id="btnFilter" name="btnFilter">Bộ lọc <i class="bi bi-filter"></i></button>
                </div>
                <div class="lineHorizontal"></div>
                <div class="d-flex">
                    <div id="btnCreateAct" class="p-2 flex-fill btnActivity">Hoạt động tổ chức</div>
                    <div id="btnJoinAct" class="p-2 flex-fill btnActivity">Hoạt động tham gia</div>
                </div>
            </div>
            <!-- <div>
                <div class="d-flex mb-3 align-items-center">
                    <label class="p-2 me-auto">DUYỆT HOẠT ĐỘNG</label>
                    <button class="ms-auto" id="btnFilter" name="btnFilter">Bộ lọc <i class="bi bi-filter"></i></button>
                </div>
            </div> -->
            <!-- The Modal -->
            <div class="modal" id="modalFilter">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <!-- Modal Header -->
                        <div class="modal-header">
                        <h4 class="modal-title titleFilter" >Bộ lọc hoạt động</h4>
                        <button id="btn-closeFilter" type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                        </div>
                        <!-- Modal body -->
                        <div class="modal-body">
                            <form action="#" id="formFilter">
                                <!-- mục hoạt động tổ chức -->
                                <div>
                                    <div class="row">
                                        <div class="col-md-5">
                                            <p>Duyệt thành viên</p>
                                        </div>
                                        <div class="col-md-7">
                                            <select class="form-select form-select-sm mt-3 optEvaluate">
                                                <option>Tất cả</option>
                                                <option>Thành viên đăng ký tham gia</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="row align-items-center">
                                        <div class="col-md-5">
                                            <p>Trạng thái hoạt động</p>
                                        </div>
                                        <div class="col-md-7">
                                            <select class="form-select form-select-sm mt-3 optState">
                                                <option>Tất cả</option>
                                                <option>Chờ duyệt</option>
                                                <option>Chưa diễn ra</option>
                                                <option>Đang diễn ra</option>
                                                <option>Đã diễn ra</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-5">
                                            <p>Tổng kết</p>
                                        </div>
                                        <div class="col-md-7">
                                            <select class="form-select form-select-sm mt-3 optSummary">
                                                <option>Tất cả</option>
                                                <option>Đã tổng kết</option>
                                                <option>Chưa tổng kết</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-5">
                                            <p>Đánh giá</p>
                                        </div>
                                        <div class="col-md-7">
                                            <select class="form-select form-select-sm mt-3 optEvaluate">
                                                <option>Tất cả</option>
                                                <option>Đã đánh giá</option>
                                                <option>Chưa đánh giá</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <!-- mục hoạt động tham gia -->
                            </form>
                        </div>
                        <!-- Modal footer -->
                        <div class="modal-footer">
                            <button type="reset" class="btnReset btn-secondary" id="btnResetFilter" >Hủy thay đổi</button>
                            <button type="button" class="btnSave btn-primary">Lưu thay đổi</button>
                        </div>
                    </div>
                </div>
            </div>

        </div>
<!--        <div th:text="${actListOfMember.size()}"></div>-->
        <div class="container__sectionAct" th:each="activity:${actListByHost}" >

            <div class="d-flex section__padding">
                <img class="img-avatar-small" th:src="@{/images/avatar.png}" alt="">
                <div class="header-activity">
                    <label th:text="${user.getHoTen()}"></label>
                    <div class="time-activity">
                        <i class="bi bi-clock"></i>
<!--                        chỗ ni phải lấy thời gian đăng ký-->
                        <span th:text="${activity.getThoiGianBD()}"></span>
                    </div>
                </div>
                
                <div class="dropdown ms-auto">
                    <i class="bi bi-three-dots icon-more" data-bs-toggle="dropdown"></i>
                    <ul class="dropdown-menu">
                      <li><a class="dropdown-item" href="#">Duyệt thành viên</a></li>
                      <li><a class="dropdown-item" href="#">Tổng kết hoạt động</a></li>
                      <li><a class="dropdown-item" href="#">Đánh giá thành viên</a></li>
                    </ul>
                </div>
            </div>
            <div class="d-flex section__padding ">
                <p class="title-activity" th:text="${activity.getTenHD()}"></p>
            </div>
            <div class="d-flex section__padding p-0">
                <i class="bi bi-geo-alt icon-address"></i>
                <p class="address-activity" th:text="${activity.getDiaDiem()}"></p>
            </div>
            <div class="section__padding content-activity" th:text="${activity.getMoTa()}">

            </div>
            <div class="text-end"><a th:href="@{/Join(id=${activity.getId()})}" class="linkMore">Xem thêm...</a></div>
            <div class="section__no-padding">
                <div>
                    <img class="img-activity" th:src="@{/images/anh1.jpg}" alt="">
                </div>
                <div class="lineHorizontal"></div>
    
                <div class="row progress-activity">
                    <div class="col-sm-3">Chờ duyệt</div>
                    <div class="col-sm-3">Chưa diễn ra</div>
                    <div class="col-sm-3">Đang diễn ra</div>
                    <div class="col-sm-3">Đã diễn ra</div>
                </div>
                <div class="progress">
                    <div class="progress-bar custom-progress" style="width:70%"> </div>
                </div>
                <div class="mt-3 lineHorizontal"></div>
            </div>
            <div class="pb-1 pt-1 section__padding d-flex align-items-center justify-content-center">
                <button id="btnEvaluate"><i  class="bi bi-chat-square-heart"></i> Đánh giá</button>
                <button id="btnSummary"><i class="bi bi-send-check"></i> Tổng kết</button>
            </div>
        </div>
    </div>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js" integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+" crossorigin="anonymous"></script>
</body>
</html>